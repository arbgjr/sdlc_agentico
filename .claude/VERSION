# SDLC AgÃªntico Version
version: "2.1.8"
build_date: "2026-01-27"
release_notes: |
  Configuration & Path Management - Critical Fixes

  This release addresses critical issues identified in a comprehensive audit of sdlc-import,
  significantly improving accuracy, confidence scoring, and reducing false positives.

  ğŸ¯ Critical Fixes (C1-C3):
  - C1: ADR Reconciliation - Detect existing ADRs to avoid duplicates
    â€¢ Similarity matching with 0.8 threshold using SequenceMatcher
    â€¢ Reconciliation modes: skip duplicates, enrich existing, migrate to YAML
    â€¢ Cross-reference index generation (adr_index.yml)
    â€¢ Supports Markdown, YAML, and AsciiDoc formats

  - C2: Multi-Pattern Authorization Detection (8+ patterns)
    â€¢ ASP.NET Core: [Authorize], .RequireAuthorization()
    â€¢ Minimal API: .WithMetadata(new AuthorizeAttribute), .RequirePermission()
    â€¢ Custom: RequirePermissionAttribute, RequireRole, RequirePolicy
    â€¢ Infrastructure validation: AddAuthorization(), UseAuthorization()
    â€¢ Reduced false positives: P1 instead of P0 when custom authorization detected

  - C3: Confidence Scoring Rubric with Breakdown
    â€¢ Evidence-based scoring with transparent breakdown
    â€¢ Weighted formula: 0.5*code + 0.3*docs + 0.2*runtime
    â€¢ Margin calculation (Â±0.05 to Â±0.15) based on evidence diversity
    â€¢ Validation status: NOT_VALIDATED vs VALIDATED

  ğŸ›¡ï¸ Grave Fixes (G1-G4):
  - G1: Bounded Context-Aware Threat Modeling
    â€¢ Analyzes each bounded context individually
    â€¢ Domain-specific threats: GDPR (3), Financial (2), Event-driven (2)
    â€¢ Data lifecycle threats (4): backup encryption, retention bypass, PITR abuse, exports

  - G2: Test Coverage Analysis
    â€¢ Detects existing tests before reporting "no tests"
    â€¢ Counts test files, projects, executes `dotnet test --list-tests`
    â€¢ P0 only if truly no tests, P2 if coverage unknown

  - G3: Internal Architecture Diagrams
    â€¢ CQRS/MediatR sequence: Endpointâ†’Validatorâ†’Mediatorâ†’Handlerâ†’Repoâ†’DbContext
    â€¢ Traditional MVC fallback: Controllerâ†’Serviceâ†’Repositoryâ†’Database

  ğŸ“Š Medium Fixes (M2-M4):
  - M2: Tech Debt Risk Scoring (risk = probability Ã— impact, ROI calculation)
  - M3: Anti-Mock Policy Validation (structure added)
  - M4: Secret Scanning (structure added)

  ğŸ“ˆ Quality Improvements:
  - False Positives (P0): 30% â†’ <10% (-67%)
  - Confidence Accuracy: 0.89 â†’ 0.70 Â± 0.12 (calibrated)
  - Threat Coverage: 12 â†’ 18+ threats (+50%)

  Files Modified:
  - adr_validator.py (+250 lines): ADR reconciliation
  - confidence_scorer.py (+200 lines, NEW): Rubric-based scoring
  - tech_debt_detector.py (+350 lines): Authorization, test coverage, risk scoring
  - threat_modeler.py (+180 lines): Bounded context threats
  - architecture_visualizer.py (+100 lines): Internal diagrams
  - project_analyzer.py (+50 lines): Reconciliation integration
  - documentation_generator.py (+30 lines): ADR index generation
  - import_config.yml (+20 lines): Configuration

changelog:
  - version: "2.1.8"
    date: "2026-01-27"
    changes:
      - "fix(sdlc-import): project_path bug - Detecta quando skill directory Ã© passado ao invÃ©s de CWD"
      - "fix(sdlc-import): Corrige bug onde /sdlc-import gravava em .claude/skills/sdlc-import/.agentic_sdlc/"
      - "fix(sdlc-import): Auto-detecÃ§Ã£o de skill directory + correÃ§Ã£o para Path.cwd()"
      - "feat(config): output_dir agora configurÃ¡vel em settings.json"
      - "feat(config): Nova seÃ§Ã£o sdlc.output.project_artifacts_dir e framework_artifacts_dir"
      - "feat(config): Prioridade: settings.json > import_config.yml > default .project"
      - "feat(config): MÃ©todo _load_output_dir_from_settings() para leitura dinÃ¢mica"
      - "fix(sdlc-import): Remove TODOS hardcoded paths .project e .agentic_sdlc"
      - "fix(sdlc-import): documentation_generator.py - usa config['general']['output_dir'] dinamicamente"
      - "fix(sdlc-import): _load_sdlcignore() - usa framework_artifacts_dir de settings.json"
      - "feat(sdlc-import): _load_output_dir_from_settings_for_framework() para ignore patterns"
      - "docs(CLAUDE.md): Clarifica diferenÃ§a entre project_artifacts_dir e framework_artifacts_dir"
      - "docs(CLAUDE.md): REGRA DE OURO - project_artifacts_dir SEMPRE, framework_artifacts_dir APENAS no framework"
      - "docs(CLAUDE.md): Casos de uso detalhados (Autoritas vs mice_dolphins)"
      - "test(sdlc-import): 3 testes para project_path detection (skill dir, normal, edge case)"
      - "test(sdlc-import): 3 testes para output_dir settings (settings.json, fallback, default)"
      - "BREAKING: Nenhum - Totalmente backward compatible com fallback"
  - version: "2.1.7"
    date: "2026-01-27"
    changes:
      - "feat(sdlc-import): C1 - ADR reconciliation to avoid duplicates"
      - "feat(sdlc-import): C1 - detect_existing_adrs() scans docs/adr/, decisions/, .adr/"
      - "feat(sdlc-import): C1 - reconcile_adrs() with similarity threshold >0.8"
      - "feat(sdlc-import): C1 - generate adr_index.yml for cross-reference tracking"
      - "feat(sdlc-import): C2 - Multi-pattern authorization detection (8 patterns)"
      - "feat(sdlc-import): C2 - Detects [Authorize], RequireAuthorization(), RequirePermission, custom attributes"
      - "feat(sdlc-import): C2 - Checks infrastructure: AddAuthorization(), UseAuthorization()"
      - "feat(sdlc-import): C2 - Reduced false positives (P1 instead of P0 when uncertain)"
      - "feat(sdlc-import): C3 - Confidence scoring with rubric and breakdown"
      - "feat(sdlc-import): C3 - ConfidenceRubric class with evidence-based scoring (code/docs/runtime)"
      - "feat(sdlc-import): C3 - Weighted formula: 0.5*code + 0.3*docs + 0.2*runtime"
      - "feat(sdlc-import): C3 - Margin calculation (Â±0.05 to Â±0.15) based on evidence diversity"
      - "feat(sdlc-import): C3 - Validation status: NOT_VALIDATED vs VALIDATED"
      - "feat(sdlc-import): G1 - Threat model per bounded context"
      - "feat(sdlc-import): G1 - Detect bounded contexts (.api, .service, .domain suffixes)"
      - "feat(sdlc-import): G1 - Domain-specific threats: GDPR (3), Financial (2), Event-driven (2)"
      - "feat(sdlc-import): G1 - Data lifecycle threats (4): backup encryption, retention bypass, PITR abuse, export exfiltration"
      - "feat(sdlc-import): G1 - Context characteristics: has_events, has_gdpr_data, has_financial_data"
      - "feat(sdlc-import): G2 - Test coverage analysis before reporting 'no tests'"
      - "feat(sdlc-import): G2 - Count test files, test projects, estimated test count"
      - "feat(sdlc-import): G2 - Use dotnet test --list-tests for .NET projects"
      - "feat(sdlc-import): G2 - P0 only if truly no tests, P2 if coverage unknown"
      - "feat(sdlc-import): G3 - Internal architecture diagrams"
      - "feat(sdlc-import): G3 - CQRS/MediatR sequence: Endpointâ†’Validatorâ†’Mediatorâ†’Handlerâ†’Repoâ†’DbContext"
      - "feat(sdlc-import): G3 - Traditional MVC fallback: Controllerâ†’Serviceâ†’Repositoryâ†’Database"
      - "feat(sdlc-import): G3 - Auto-detect architecture pattern from backend frameworks"
      - "feat(sdlc-import): M2 - Tech debt risk scoring structure (probability Ã— impact)"
      - "feat(sdlc-import): M3 - Anti-mock policy validation structure"
      - "feat(sdlc-import): M4 - Secret scanning structure"
      - "config(sdlc-import): Added adr_reconciliation config with similarity_threshold=0.8"
  - version: "2.1.6"
    date: "2026-01-27"
    changes:
      - "fix(ci): splash.py e logo.png agora incluÃ­dos no tar.gz/zip"
      - "fix(ci): GitHub Action copiava apenas subdiretÃ³rios, ignorava arquivos da raiz"
      - "fix(ci): Releases anteriores (v2.1.4, v2.1.5) NÃƒO continham splash.py"
      - "CRITICAL: Esta Ã© a primeira release COM splash.py funcional!"
  - version: "2.1.5"
    date: "2026-01-27"
    changes:
      - "fix(splash): Removido clear_screen() em --no-animate mode para preservar contexto"
      - "fix(setup): Adicionado sleep 2 apÃ³s show_splash para dar tempo de visualizaÃ§Ã£o"
      - "fix(setup): Splash screen agora visÃ­vel durante toda execuÃ§Ã£o do setup"
      - "fix(setup): Path detection do splash.py corrigido para funcionar de qualquer diretÃ³rio"
      - "feat(setup): Splash completo com mice+dolphins ASCII art sempre exibido"
  - version: "2.1.4"
    date: "2026-01-26"
    changes:
      - "feat(sdlc-import): .sdlcignore support to prevent framework self-scanning"
      - "feat(sdlc-import): _load_sdlcignore() loads patterns from project + framework root"
      - "feat(sdlc-import): _should_ignore() checks files against ignore patterns"
      - "feat(sdlc-import): Modified _count_loc() and _scan_codebase() to respect ignore"
      - "docs(sdlc-import): Documented .sdlcignore in README with examples and benefits"
      - "chore: Created Issue #92 for Tripla pattern detection enhancement (Terraform + Database IaC)"
  - version: "2.1.3"
    date: "2026-01-26"
    changes:
      - "fix(sdlc-import): FileNotFoundError ao gerar graph.json (garantir criaÃ§Ã£o de parent dir)"
      - "fix(sdlc-import): Path confusion - mÃ³dulos usando paths relativos (corrigir para absoluto)"
      - "fix(sdlc-import): YAML quoting vulnerÃ¡vel com @, &, : (configuraÃ§Ã£o robusta de yaml.dump)"
      - "fix(sdlc-import): Pipeline abort completo se graph falha (try-except com fallback)"
      - "fix(sdlc-import): DeprecationWarning datetime.utcnow() (migrar para timezone-aware)"
  - version: "2.0.7"
    date: "2026-01-25"
    changes:
      - "fix(sdlc-import): Infrastructure preservation to prevent deletion of framework files"
      - "feat(sdlc-import): InfrastructurePreserver class with backup/restore logic"
      - "test(sdlc-import): Comprehensive integration tests for preservation (4 tests)"
  - version: "2.0.6"
    date: "2026-01-24"
    changes:
      - "feat(sdlc-import): Post-import validation system with auto-correction"
      - "feat(sdlc-import): ADREvidenceFixer - remove ADRs with suspicious evidence"
      - "feat(sdlc-import): TechDebtFixer - validate report completeness"
      - "feat(sdlc-import): DiagramQualityFixer - validate diagram complexity"
      - "feat(sdlc-import): ArtifactCompletenessFixer - ensure required artifacts"
      - "feat(sdlc-import): PostImportValidator orchestrator with quality scoring"
      - "feat(sdlc-import): QualityReportGenerator with Jinja2 templates"
      - "feat(sdlc-import): User approval workflow (Accept/Re-run/Abort)"
      - "fix(sdlc-import): Tech debt report now renders ALL items (not just summary)"
      - "fix(sdlc-import): Documentation generator uses Jinja2 for tech debt reports"
      - "config(sdlc-import): post_import_validation_rules.yml with thresholds"
      - "docs(sdlc-import): POST_IMPORT_VALIDATION_IMPLEMENTATION.md complete guide"
  - version: "2.0.5"
    date: "2026-01-24"
    changes:
      - "fix(sdlc-import): Increase max_project_size from 500k to 900k LOC"
      - "enhancement(sdlc-import): Support for very large projects (monorepos, enterprise legacy)"
  - version: "2.0.4"
    date: "2026-01-24"
    changes:
      - "feat(sdlc-import): ADRValidator com validaÃ§Ã£o LGPD, RLS, JWT, multi-tenancy"
      - "feat(sdlc-import): GraphGenerator com knowledge graph e relaÃ§Ãµes semÃ¢nticas"
      - "feat(sdlc-import): IssueCreator com criaÃ§Ã£o automÃ¡tica de issues no GitHub"
      - "feat(sdlc-import): MigrationAnalyzer para EF Core, Alembic, Flyway"
      - "feat(sdlc-import): Quality gate graph-integrity.yml"
      - "feat(sdlc-import): Config adr_validation_rules.yml e migration_patterns.yml"
      - "test(sdlc-import): 999 novos testes unitÃ¡rios (306+234+184+275)"
      - "test(sdlc-import): 100% coverage em validators, generators, analyzers"
      - "docs(sdlc-import): IMPLEMENTATION_SUMMARY_v2.1.0.md completo"
  - version: "2.0.3"
    date: "2026-01-24"
    changes:
      - "feat(version-checker): IntegraÃ§Ã£o automÃ¡tica com orchestrator (Phase 0 workflow)"
      - "feat(version-checker): ValidaÃ§Ã£o rigorosa de migration scripts (shebang + dangerous patterns)"
      - "feat(version-checker): Telemetria de adoÃ§Ã£o com mÃ©tricas Loki/Grafana"
      - "feat(version-checker): AskUserQuestion integration (update/changelog/skip/later)"
      - "feat(version-checker): Rollback automÃ¡tico em falhas de migration (crÃ­tico)"
      - "sec(version-checker): DetecÃ§Ã£o de padrÃµes perigosos (rm -rf /, dd, mkfs, fdisk, parted)"
      - "sec(version-checker): ValidaÃ§Ã£o de shebang obrigatÃ³ria (#!/bin/bash ou #!/usr/bin/env bash)"
      - "sec(version-checker): Timeout enforcement 300s em migrations"
      - "sec(version-checker): Exit code validation (nÃ£o-zero = rollback)"
      - "test(version-checker): 103 testes (+10 novos), 100% pass rate, 90%+ cobertura"
      - "docs(orchestrator): SeÃ§Ã£o completa de verificaÃ§Ã£o de updates (135 linhas)"
      - "docs(version-checker): IMPLEMENTATION_SUMMARY.md atualizado com v2.0.3"
      - "docs(reports): version-checker-enhancements-v2.0.3.md (anÃ¡lise completa)"
  - version: "2.0.2"
    date: "2026-01-23"
    changes:
      - "fix(sdlc-import): Force LLM when config llm.enabled=true (ignore --no-llm flag)"
      - "fix(sdlc-import): Force threat modeling when config enabled=true (no defer)"
      - "fix(sdlc-import): Populate phase-artifacts/phase-1-discovery/ with JSON logs"
      - "fix(sdlc-import): Index original ADRs in references/original-adrs/"
      - "fix(sdlc-import): Auto-push feature branch to remote after analysis"
      - "chore(sdlc-import): Add TODO.md for v2.1.0 planned features"
  - version: "2.0.1"
    date: "2026-01-23"
    changes:
      - "fix(sdlc-import): Adiciona .terraform e artifacts IaC aos exclude_patterns"
      - "fix(sdlc-import): Adiciona bin/obj/.NET build artifacts"
      - "fix(sdlc-import): Adiciona Migrations, packages, coverage, docs"
      - "fix(sdlc-import): Aumenta max_project_size de 100k para 500k LOC"
      - "fix(sdlc-import): Projetos grandes (1.6GB, 22M LOC) agora analisam corretamente"
  - version: "2.0.0"
    date: "2026-01-23"
    changes:
      - "feat(sdlc-import): Language detection expansion - 10 to 30 technologies (3x increase)"
      - "feat(sdlc-import): Backend/Infrastructure (9 new): C++, Rust enhanced, Ansible, Jenkins, Chef, Puppet, Gradle, Selenium, Bicep"
      - "feat(sdlc-import): Frontend/Testing (6 new): Playwright, TypeScript enhanced, Vue.js, Svelte, Tailwind CSS, Vite/Webpack"
      - "feat(sdlc-import): Mobile (5 new): React Native, Flutter/Dart, Swift, Kotlin enhanced, Xamarin"
      - "feat(sdlc-import): LSP integration for C++ (clangd-lsp), Flutter (dart-lsp), Swift (sourcekit-lsp)"
      - "feat(sdlc-import): Disambiguation logic for overlapping extensions (Chef/Ruby, Ansible/YAML, Gradle/Kotlin)"
      - "feat(sdlc-import): Configuration-driven design - language_patterns.yml expanded 286â†’669 lines (+383)"
      - "feat(sdlc-import): 8 new detection methods: IaC, config_mgmt, CI/CD, frontend, build_tools, mobile, testing"
      - "feat(sdlc-import): Brace expansion support for glob patterns (**/*.{cpp,h,hpp})"
      - "test(sdlc-import): 5 new integration tests (C++, Flutter, Vue, Ansible, Playwright) - 87 total"
      - "test(sdlc-import): 10 new unit tests covering all 20 technologies - 21 total"
      - "test(sdlc-import): 255/255 tests passing (100% success rate) - production ready"
      - "fix(sdlc-import): Framework list overwriting bug (assignment â†’ extend)"
      - "fix(sdlc-import): Boost detection via brace expansion for multi-extension patterns"
      - "docs(sdlc-import): Updated SKILL.md, README.md with full technology matrix"
      - "docs(sdlc-import): IMPLEMENTATION_SUMMARY.md with testing details and bug fixes"
  - version: "1.9.0"
    date: "2026-01-23"
    changes:
      - "feat(document-enricher): Sistema de enriquecimento automÃ¡tico de documentos"
      - "feat(document-enricher): Hybrid search com 4 fatores (keyword, title, summary, category)"
      - "feat(document-enricher): Versionamento de enrichments (.enriched.v1.md, v2, v3...)"
      - "feat(document-enricher): PreservaÃ§Ã£o de documentos originais (imutÃ¡veis)"
      - "feat(document-enricher): IntegraÃ§Ã£o com knowledge graph (relaÃ§Ã£o 'enriches')"
      - "feat(agents): Step 0 pre-research em 5 agentes (domain-researcher, doc-crawler, requirements-analyst, adr-author, threat-modeler)"
      - "feat(commands): /doc-search e /doc-enrich para busca e enriquecimento manual"
      - "feat(quality-gate): enrichment-quality.yml com validaÃ§Ã£o de sources, integridade e versioning"
      - "test(document-enricher): 37 testes (17 find_related + 13 enrich + 8 update_index + 3 integration)"
      - "docs(document-enricher): Guia completo de enriquecimento (.docs/enrichment-guide.md)"
      - "docs(ADR): ADR-019 documentando arquitetura de enriquecimento"
  - version: "1.8.1"
    date: "2026-01-23"
    changes:
      - "feat(version-checker): Sistema inteligente de auto-update"
      - "feat(version-checker): AnÃ¡lise de impacto de changelogs"
  - version: "1.8.0"
    date: "2026-01-22"
    changes:
      - "feat(version-checker): Sistema inteligente de auto-update"
      - "feat(version-checker): AnÃ¡lise de impacto de changelogs"
      - "feat(version-checker): DetecÃ§Ã£o de breaking changes e migraÃ§Ãµes"
      - "feat(version-checker): Sistema de dismissal para versÃµes"
      - "feat(version-checker): ExecuÃ§Ã£o automatizada via git com rollback"
      - "feat(version-checker): Cache inteligente de releases (1h TTL)"
      - "test(version-checker): 93 testes com 90%+ coverage"
      - "docs(version-checker): DocumentaÃ§Ã£o completa com exemplos"
  - version: "1.7.16"
    date: "2026-01-17"
    changes:
      - "feat(phase-commit): Commit E push automÃ¡tico ao final de cada fase"
      - "feat(phase-commit): DetecÃ§Ã£o automÃ¡tica da fase via manifest/project"
      - "feat(phase-commit): Mapeamento de tipo de commit por fase"
      - "feat(phase-commit): AtualizaÃ§Ã£o de manifest.yml com commit hash"
      - "feat(hooks): phase-commit-reminder.sh executa commit automaticamente"
      - "feat(logging): Logs estruturados com Loki (skill=phase-commit)"
      - "fix(phase-commit): Tratamento de erros com rollback seguro"

  - version: "1.0.0"
    date: "2026-01-16"
    changes:
      - "feat: IntegraÃ§Ã£o completa com GitHub Projects V2"
      - "feat: SincronizaÃ§Ã£o automÃ¡tica de Wiki"
      - "feat: RAG corpus indexer"
      - "feat: Session analyzer com learnings"
      - "feat: Sistema de feature flags"
      - "feat: Hooks automÃ¡ticos por fase"
      - "fix: Fallbacks robustos para serviÃ§os externos"
      - "docs: DocumentaÃ§Ã£o completa de skills e comandos"

compatibility:
  min_claude_version: "1.0.0"
  min_gh_version: "2.0.0"
  python: ">=3.9"
  node: ">=18"
