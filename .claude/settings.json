{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "version": "1.0",
  "project": {
    "name": "sdlc_agentico",
    "description": "SDLC Agentico - Sistema de desenvolvimento de software orientado por agentes"
  },
  "env": {
    "SDLC_LOG_LEVEL": "WARNING",
    "SDLC_LOKI_ENABLED": "false",
    "SDLC_LOKI_URL": "http://localhost:3100"
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/enforce-tool-access.py || python .claude/hooks/enforce-tool-access.py",
            "description": "Tool Access Control - validates tool usage against agent-specific allow/deny lists"
          }
        ]
      },
      {
        "matcher": "Write(.agentic_sdlc/**/*)",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/ensure-feature-branch.py || python .claude/hooks/ensure-feature-branch.py"
          }
        ]
      },
      {
        "matcher": "Write(src/**/*)",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/ensure-feature-branch.py || python .claude/hooks/ensure-feature-branch.py"
          }
        ]
      },
      {
        "matcher": "Edit(src/**/*)",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/ensure-feature-branch.py || python .claude/hooks/ensure-feature-branch.py"
          }
        ]
      },
      {
        "matcher": "Bash(git commit*)",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/validate-commit.py || python .claude/hooks/validate-commit.py"
          },
          {
            "type": "command",
            "command": ".claude/hooks/update-project-timestamp.sh"
          }
        ]
      },
      {
        "matcher": "Bash(git push*)",
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/check-gate.py auto || python .claude/hooks/check-gate.py auto"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit(*.py)",
        "hooks": [
          {
            "type": "command",
            "command": "black \"$TOOL_INPUT_FILE_PATH\" 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Write(*.py)",
        "hooks": [
          {
            "type": "command",
            "command": "black \"$TOOL_INPUT_FILE_PATH\" 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Edit(docs/adr/*.md)",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ADR atualizado - lembre de atualizar o index'"
          }
        ]
      },
      {
        "matcher": "Write(*.spec.md)",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'Spec criada - considere usar /auto-branch feature'"
          }
        ]
      },
      {
        "matcher": "Edit(src/**/*)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/detect-adr-need.sh"
          }
        ]
      },
      {
        "matcher": "Edit(infrastructure/**/*)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/detect-adr-need.sh"
          }
        ]
      },
      {
        "matcher": "Edit(**/docker-compose*.yml)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/detect-adr-need.sh"
          }
        ]
      },
      {
        "matcher": "Write(.agentic_sdlc/projects/*/planning/task-breakdown.yml)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/phase-commit-reminder.sh"
          }
        ]
      },
      {
        "matcher": "Write(.agentic_sdlc/projects/*/decisions/adr-*.yml)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/phase-commit-reminder.sh"
          }
        ]
      },
      {
        "matcher": "Write(.agentic_sdlc/projects/*/specs/*.spec.md)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/phase-commit-reminder.sh"
          }
        ]
      },
      {
        "matcher": "Write(.claude/agents/*.md)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/auto-update-component-counts.sh"
          }
        ]
      },
      {
        "matcher": "Write(.claude/skills/**/SKILL.md)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/auto-update-component-counts.sh"
          }
        ]
      },
      {
        "matcher": "Write(.claude/commands/*.md)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/auto-update-component-counts.sh"
          }
        ]
      },
      {
        "matcher": "Write(.claude/hooks/*.sh)",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/auto-update-component-counts.sh"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 .claude/hooks/detect-client.py || python .claude/hooks/detect-client.py"
          },
          {
            "type": "command",
            "command": "python3 .claude/hooks/detect-phase.py || python .claude/hooks/detect-phase.py"
          },
          {
            "type": "command",
            "command": ".claude/hooks/query-phase-learnings.sh"
          },
          {
            "type": "command",
            "command": "python3 .claude/hooks/auto-migrate.py || python .claude/hooks/auto-migrate.py"
          },
          {
            "type": "command",
            "command": "python3 .claude/hooks/detect-documents.py || python .claude/hooks/detect-documents.py"
          },
          {
            "type": "command",
            "command": ".claude/hooks/validate-framework-structure.sh"
          }
        ]
      }
    ]
  },
  "agents": {
    "default_model": "sonnet",
    "orchestrator_model": "opus",
    "available_agents": [
      "orchestrator",
      "alignment-agent",
      "intake-analyst",
      "compliance-guardian",
      "domain-researcher",
      "doc-crawler",
      "rag-curator",
      "product-owner",
      "requirements-analyst",
      "ux-writer",
      "system-architect",
      "adr-author",
      "data-architect",
      "threat-modeler",
      "delivery-planner",
      "code-author",
      "code-reviewer",
      "test-author",
      "qa-analyst",
      "security-scanner",
      "performance-analyst",
      "release-manager",
      "cicd-engineer",
      "change-manager",
      "incident-commander",
      "rca-analyst",
      "metrics-analyst",
      "observability-engineer",
      "playbook-governance",
      "iac-engineer",
      "doc-generator",
      "sdlc-importer"
    ]
  },
  "skills": {
    "available_skills": [
      "gate-evaluator",
      "memory-manager",
      "rag-query",
      "spec-kit-integration",
      "bmad-integration",
      "auto-branch",
      "iac-generator",
      "doc-blueprint",
      "reference-indexer",
      "system-design-decision-engine",
      "phase-commit",
      "session-analyzer",
      "document-processor",
      "document-enricher",
      "frontend-testing",
      "decay-scoring",
      "github-sync",
      "github-projects",
      "github-wiki",
      "alignment-workflow",
      "doc-generator",
      "sdlc-import"
    ]
  },
  "sdlc": {
    "token_budget": {
      "enabled": true,
      "global_max": 200000,
      "per_agent_max": 50000,
      "orchestrator_max": 80000,
      "warning_threshold": 0.8,
      "action_on_overflow": "warn",
      "monitoring": {
        "track_tool_schemas": true,
        "track_bootstrap_files": true,
        "track_conversation_history": true
      }
    },
    "feature_flags": {
      "multi_client_architecture": false
    },
    "clients": {
      "enabled": false,
      "directory": ".sdlc_clients",
      "default_profile": "generic",
      "auto_detect": true,
      "note": "Enable via feature_flags.multi_client_architecture"
    },
    "phases": [
      {
        "number": 0,
        "name": "Preparation",
        "agents": [
          "intake-analyst",
          "compliance-guardian",
          "sdlc-importer"
        ]
      },
      {
        "number": 1,
        "name": "Discovery",
        "agents": [
          "domain-researcher",
          "doc-crawler",
          "rag-curator"
        ]
      },
      {
        "number": 2,
        "name": "Requirements",
        "agents": [
          "product-owner",
          "requirements-analyst",
          "ux-writer"
        ]
      },
      {
        "number": 3,
        "name": "Architecture",
        "agents": [
          "system-architect",
          "adr-author",
          "data-architect",
          "threat-modeler",
          "iac-engineer"
        ]
      },
      {
        "number": 4,
        "name": "Planning",
        "agents": [
          "delivery-planner"
        ]
      },
      {
        "number": 5,
        "name": "Implementation",
        "agents": [
          "code-author",
          "code-reviewer",
          "test-author",
          "iac-engineer"
        ]
      },
      {
        "number": 6,
        "name": "Quality",
        "agents": [
          "qa-analyst",
          "security-scanner",
          "performance-analyst"
        ]
      },
      {
        "number": 7,
        "name": "Release",
        "agents": [
          "release-manager",
          "cicd-engineer",
          "change-manager",
          "doc-generator"
        ]
      },
      {
        "number": 8,
        "name": "Operations",
        "agents": [
          "incident-commander",
          "rca-analyst",
          "metrics-analyst",
          "observability-engineer"
        ]
      }
    ],
    "gates": {
      "directory": ".claude/skills/gate-evaluator/gates",
      "enforce": true,
      "security_gate": "security-gate.yml"
    },
    "complexity_levels": {
      "0": {
        "name": "Quick Flow",
        "description": "Bug fix, typo, small change",
        "command": "/quick-fix",
        "phases": [
          5,
          6
        ],
        "time_estimate": "~5 min",
        "auto_branch": true,
        "branch_prefix": "fix/"
      },
      "1": {
        "name": "Feature",
        "description": "Feature in existing service",
        "command": "/new-feature",
        "phases": [
          2,
          5,
          6
        ],
        "time_estimate": "~15-30 min",
        "auto_branch": true,
        "branch_prefix": "feature/"
      },
      "2": {
        "name": "BMAD Method",
        "description": "New product or service",
        "command": "/sdlc-start",
        "phases": [
          0,
          1,
          2,
          3,
          4,
          5,
          6,
          7
        ],
        "time_estimate": "~30 min - hours",
        "auto_branch": true,
        "branch_prefix": "feature/"
      },
      "3": {
        "name": "Enterprise",
        "description": "Compliance, multi-team, critical",
        "command": "/sdlc-start",
        "phases": [
          0,
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8
        ],
        "time_estimate": "variable",
        "human_approval_at_all_gates": true,
        "auto_branch": true,
        "branch_prefix": "feature/"
      }
    },
    "security_by_design": {
      "enabled": true,
      "mandatory_gates": [
        "phase-2-to-3",
        "phase-3-to-4",
        "phase-5-to-6",
        "phase-6-to-7"
      ],
      "escalation_triggers": {
        "cvss_threshold": 7.0,
        "pii_exposure": true,
        "auth_modification": true,
        "crypto_change": true,
        "new_public_endpoint": true
      }
    },
    "output": {
      "project_artifacts_dir": ".project",
      "framework_artifacts_dir": ".agentic_sdlc"
    }
  },
  "integrations": {
    "github": {
      "copilot_coding_agent": true,
      "create_issues": true,
      "create_prs": true
    },
    "spec_kit": {
      "enabled": true,
      "templates_dir": ".specify/templates",
      "auto_branch_on_spec_create": true
    }
  },
  "memory": {
    "directory": ".agentic_sdlc",
    "legacy_directory": ".claude/memory",
    "projects_dir": "projects",
    "references_dir": "references",
    "templates_dir": "templates",
    "corpus_dir": "corpus",
    "sessions_dir": "sessions",
    "persist_decisions": true,
    "persist_learnings": true,
    "auto_migrate": true
  }
}
