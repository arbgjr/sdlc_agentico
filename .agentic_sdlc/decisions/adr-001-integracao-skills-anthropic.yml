# Architecture Decision Record
# ADR-001: Estrategia de Integracao de Skills e Plugins Anthropic

decision:
  id: adr-001
  type: technical
  title: "Estrategia de Integracao de Skills e Plugins Oficiais da Anthropic ao SDLC Agentico"
  created_at: "2026-01-14T00:00:00Z"
  status: accepted

  context: |
    O SDLC Agentico precisa processar documentos externos (PDF, XLSX, DOCX) que stakeholders
    fornecem com requisitos, regras de negocio e especificacoes. Alem disso, ha necessidade
    de suporte a desenvolvimento frontend (React, Vue) e testes E2E para projetos full-stack.

    A Anthropic disponibiliza skills oficiais (pdf, xlsx, docx, pptx, webapp-testing,
    frontend-design, web-artifacts-builder) e plugins (code-review, pr-review-toolkit, etc.)
    que poderiam atender essas necessidades.

    Restricoes identificadas:
    - Licenca proprietaria dos skills impede redistribuicao
    - Skills existentes (reference-indexer) sao basicos demais
    - Gap significativo em suporte frontend no SDLC atual
    - Necessidade de integracao nativa com fases SDLC

  decision: |
    Adotar estrategia hibrida de integracao:

    1. CRIAR VERSOES ADAPTADAS para skills criticos:
       - document-processor: Skill unificado para PDF, XLSX, DOCX
       - frontend-testing: Skill de testes E2E com Playwright

    2. INCORPORAR PRINCIPIOS do frontend-design no agente code-author

    3. DOCUMENTAR PLUGINS OPCIONAIS que usuarios podem instalar:
       - code-review plugin para Phase 6
       - pr-review-toolkit para qa-analyst

    4. EXTRAIR E DOCUMENTAR PADROES valiosos:
       - validation-first pattern
       - confidence scoring pattern
       - multi-tool strategy
       - parallel agent execution

    Nao copiar codigo - criar implementacoes proprias inspiradas nos padroes.

  consequences:
    positive:
      - "Processamento robusto de documentos empresariais (planilhas financeiras, contratos)"
      - "Suporte completo a desenvolvimento full-stack"
      - "Testes E2E integrados ao qa-analyst"
      - "Integracao nativa com fases SDLC e quality gates"
      - "Padroes production-grade (validation-first, confidence scoring)"
      - "Independencia de licenca proprietaria"
    negative:
      - "Esforco de desenvolvimento dos skills (~2-3 dias)"
      - "Manutencao adicional dos novos skills"
      - "Dependencias extras (LibreOffice, Playwright, tesseract)"
    risks:
      - "Desvio dos padroes originais - mitigar com documentacao detalhada dos padroes"
      - "Dependencias de sistema pesadas - mitigar com instalacao opcional"

  alternatives:
    - name: "Usar skills originais diretamente"
      description: "Instruir usuarios a instalar skills Anthropic e configurar integracao"
      rejected_because: |
        Licenca proprietaria impede redistribuicao. Integracao seria fragil e
        dependente de versoes externas. Nao haveria integracao nativa com SDLC.

    - name: "Ignorar e manter atual"
      description: "Continuar com reference-indexer basico e sem suporte frontend"
      rejected_because: |
        Gap significativo para projetos empresariais e full-stack.
        reference-indexer nao suporta XLSX nem tracked changes em DOCX.

    - name: "Fork dos skills originais"
      description: "Fazer fork e modificar skills Anthropic"
      rejected_because: |
        Licenca proprietaria nao permite redistribuicao de codigo modificado.
        Violaria termos de uso.

  phase: 1  # Discovery - analise de skills externos
  author: "Claude Opus 4.5"
  approvers:
    - "armando_jr"
  related_decisions: []

  metadata:
    complexity: medium
    reversible: true
    cost_impact: "Baixo - usa bibliotecas open-source existentes"
    security_impact: "Neutro - mesmo nivel de seguranca"
    performance_impact: "Positivo - validacao robusta previne erros"

  supersedes: null

# Detalhes de Implementacao

implementation:
  skills_to_create:
    - name: document-processor
      path: .claude/skills/document-processor/
      commands:
        - "/doc-extract {file}"
        - "/doc-create {type}"
        - "/doc-validate {file}"
      dependencies:
        python:
          - pdfplumber
          - reportlab
          - openpyxl
          - python-docx
          - pandas
          - defusedxml
        system:
          - poppler-utils
          - tesseract-ocr
          - libreoffice

    - name: frontend-testing
      path: .claude/skills/frontend-testing/
      commands:
        - "/frontend-test {url}"
        - "/frontend-screenshot {url}"
      dependencies:
        python:
          - playwright
          - pytest-playwright
        browser:
          - chromium

  agents_to_update:
    - name: code-author
      changes:
        - "Adicionar secao Frontend Development Guidelines"
        - "Incorporar principios anti-AI-slop"
        - "Referenciar frontend-testing skill"

    - name: qa-analyst
      changes:
        - "Adicionar criterio E2E tests passing"
        - "Implementar confidence scoring"
        - "Referenciar frontend-testing skill"

  patterns_to_document:
    - validation-first
    - confidence-scoring
    - multi-tool-strategy
    - parallel-agent-execution

# Referencias

references:
  anthropic_skills:
    - url: "https://github.com/anthropics/skills/tree/main/skills/pdf"
      purpose: "Padroes de processamento PDF"
    - url: "https://github.com/anthropics/skills/tree/main/skills/xlsx"
      purpose: "Padroes de validacao Excel"
    - url: "https://github.com/anthropics/skills/tree/main/skills/docx"
      purpose: "Padroes de tracked changes"
    - url: "https://github.com/anthropics/skills/tree/main/skills/webapp-testing"
      purpose: "Padroes de E2E testing"
    - url: "https://github.com/anthropics/skills/tree/main/skills/frontend-design"
      purpose: "Principios de design UI/UX"

  anthropic_plugins:
    - url: "https://github.com/anthropics/claude-plugins-official"
      purpose: "Plugins oficiais para referencia"
